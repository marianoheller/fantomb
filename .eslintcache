[{"/home/wdw44/code/fantomb/src/index.tsx":"1","/home/wdw44/code/fantomb/src/reportWebVitals.ts":"2","/home/wdw44/code/fantomb/src/app/index.tsx":"3","/home/wdw44/code/fantomb/src/components/player/index.tsx":"4","/home/wdw44/code/fantomb/src/components/input/index.tsx":"5","/home/wdw44/code/fantomb/src/components/controls/index.tsx":"6","/home/wdw44/code/fantomb/src/components/timebar/index.tsx":"7","/home/wdw44/code/fantomb/src/components/recorder/index.tsx":"8","/home/wdw44/code/fantomb/src/shared/hooks/media.ts":"9","/home/wdw44/code/fantomb/src/shared/operators/mouse.ts":"10","/home/wdw44/code/fantomb/src/components/controls/hooks.ts":"11","/home/wdw44/code/fantomb/src/components/timebar/region/index.tsx":"12","/home/wdw44/code/fantomb/src/components/timebar/region/hooks.ts":"13"},{"size":267,"mtime":1613407281670,"results":"14","hashOfConfig":"15"},{"size":425,"mtime":1613407281670,"results":"16","hashOfConfig":"15"},{"size":3306,"mtime":1613490775210,"results":"17","hashOfConfig":"15"},{"size":993,"mtime":1613425757290,"results":"18","hashOfConfig":"15"},{"size":981,"mtime":1613407281670,"results":"19","hashOfConfig":"15"},{"size":2799,"mtime":1613422107940,"results":"20","hashOfConfig":"15"},{"size":3996,"mtime":1613496669427,"results":"21","hashOfConfig":"15"},{"size":1758,"mtime":1613451711790,"results":"22","hashOfConfig":"15"},{"size":4565,"mtime":1613423593220,"results":"23","hashOfConfig":"15"},{"size":1495,"mtime":1613450804660,"results":"24","hashOfConfig":"15"},{"size":496,"mtime":1613421657520,"results":"25","hashOfConfig":"15"},{"size":2016,"mtime":1613498722727,"results":"26","hashOfConfig":"15"},{"size":3785,"mtime":1613498212017,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"agnh1m",{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"35","usedDeprecatedRules":"30"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"54","messages":"55","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/home/wdw44/code/fantomb/src/index.tsx",[],["56","57"],"/home/wdw44/code/fantomb/src/reportWebVitals.ts",[],"/home/wdw44/code/fantomb/src/app/index.tsx",["58"],"import React, { useEffect, useRef } from \"react\";\n\nimport Player from \"../components/player\";\nimport Input from \"../components/input\";\nimport Timebar from \"../components/timebar\";\nimport Controls, { ControlAction } from \"../components/controls\";\n\nimport {\n  useObservable,\n  useObservableCallback,\n  useObservableState,\n  useSubscription,\n} from \"observable-hooks\";\nimport { filter, map, tap, throttleTime, withLatestFrom } from \"rxjs/operators\";\nimport { merge, OperatorFunction } from \"rxjs\";\nimport ReactPlayer from \"react-player\";\nimport Recorder from \"../components/recorder\";\n\ntype Region = { start: number; end: number };\ntype TRegion = Region | undefined;\n\nexport type Status = \"PlayingVideo\" | \"PlayingVoice\" | \"Recording\" | \"Idle\";\n\nfunction App() {\n  const playerRef = useRef<ReactPlayer>(null);\n\n  const [onUrlChange, url$] = useObservableCallback<string | undefined>(\n    (u$) => u$,\n    undefined\n  );\n\n  const [onRegion, region$] = useObservableCallback<TRegion>((r$) => r$);\n\n  const [onDuration, duration$] = useObservableCallback<number | undefined>(\n    (d$) => d$\n  );\n\n  const [onPlayerProgress, playerProgress$] = useObservableCallback<number>(\n    (n$) => n$\n  );\n\n  const [onManualProgress, manualProgress$] = useObservableCallback<number>(\n    (n$) => n$.pipe(tap((n) => playerRef.current?.seekTo(n)))\n  );\n\n  const progress$ = merge(playerProgress$, manualProgress$).pipe(\n    throttleTime(100)\n  );\n\n  const [status, onControlAction] = useObservableState<Status, ControlAction>(\n    (a$) =>\n      a$.pipe(\n        withLatestFrom(region$),\n        map(([{ type }, r]) => {\n          switch (type) {\n            case \"VideoStartedPlaying\":\n              if (r) playerRef.current?.seekTo(r.start)\n              return \"PlayingVideo\";\n            case \"VoiceStartedPlaying\":\n              return \"PlayingVoice\";\n            case \"VoiceStartedRecording\":\n              return \"Recording\";\n            case \"VideoStoppedPlaying\":\n            case \"VoiceStoppedPlaying\":\n            case \"VoiceStoppedRecording\":\n            default:\n              return \"Idle\";\n          }\n        })\n      ),\n    \"Idle\"\n  );\n\n  const regionEndAutomatically$ = useObservable<Region>(() =>\n    playerProgress$.pipe(\n      withLatestFrom(region$),\n      filter(([, r]) => r !== undefined) as OperatorFunction<\n        [number, TRegion],\n        [number, Region]\n      >,\n      filter(([v, r]) => v >= r.end),\n      map(([, r]) => r)\n    )\n  );\n\n  useSubscription(regionEndAutomatically$, (r) => {\n    onControlAction({ type: \"VideoStoppedPlaying\" });\n    playerRef.current?.seekTo(r.start);\n  });\n\n  return (\n    <div>\n      <p>https://www.youtube.com/watch?v=EqE_AH39144</p>\n      <Input onChange={onUrlChange} />\n      <Timebar\n        duration$={duration$}\n        progress={progress$}\n        onClick={onManualProgress}\n        onRegion={onRegion}\n        appRegion$={region$}\n      />\n      <Controls\n        status={status}\n        onAction={onControlAction}\n        duration$={duration$}\n      />\n      <Player\n        ref={playerRef}\n        url$={url$}\n        onDuration={onDuration}\n        onProgress={onPlayerProgress}\n        playing={status === \"PlayingVideo\"}\n      />\n      <Recorder disabled={false} status={status} onAction={onControlAction} />\n    </div>\n  );\n}\n\nexport default App;\n","/home/wdw44/code/fantomb/src/components/player/index.tsx",[],"/home/wdw44/code/fantomb/src/components/input/index.tsx",[],"/home/wdw44/code/fantomb/src/components/controls/index.tsx",[],"/home/wdw44/code/fantomb/src/components/timebar/index.tsx",["59","60"],"/home/wdw44/code/fantomb/src/components/recorder/index.tsx",[],"/home/wdw44/code/fantomb/src/shared/hooks/media.ts",[],"/home/wdw44/code/fantomb/src/shared/operators/mouse.ts",[],"/home/wdw44/code/fantomb/src/components/controls/hooks.ts",[],"/home/wdw44/code/fantomb/src/components/timebar/region/index.tsx",["61","62","63","64","65","66","67","68","69","70","71","72","73","74","75"],"/home/wdw44/code/fantomb/src/components/timebar/region/hooks.ts",["76","77","78","79","80","81"],{"ruleId":"82","replacedBy":"83"},{"ruleId":"84","replacedBy":"85"},{"ruleId":"86","severity":1,"message":"87","line":1,"column":17,"nodeType":"88","messageId":"89","endLine":1,"endColumn":26},{"ruleId":"86","severity":1,"message":"90","line":10,"column":3,"nodeType":"88","messageId":"89","endLine":10,"endColumn":15},{"ruleId":"86","severity":1,"message":"91","line":16,"column":3,"nodeType":"88","messageId":"89","endLine":16,"endColumn":6},{"ruleId":"86","severity":1,"message":"92","line":1,"column":28,"nodeType":"88","messageId":"89","endLine":1,"endColumn":34},{"ruleId":"86","severity":1,"message":"93","line":2,"column":10,"nodeType":"88","messageId":"89","endLine":2,"endColumn":23},{"ruleId":"86","severity":1,"message":"94","line":2,"column":44,"nodeType":"88","messageId":"89","endLine":2,"endColumn":46},{"ruleId":"86","severity":1,"message":"95","line":4,"column":3,"nodeType":"88","messageId":"89","endLine":4,"endColumn":16},{"ruleId":"86","severity":1,"message":"96","line":5,"column":3,"nodeType":"88","messageId":"89","endLine":5,"endColumn":24},{"ruleId":"86","severity":1,"message":"97","line":7,"column":3,"nodeType":"88","messageId":"89","endLine":7,"endColumn":18},{"ruleId":"86","severity":1,"message":"98","line":11,"column":13,"nodeType":"88","messageId":"89","endLine":11,"endColumn":18},{"ruleId":"86","severity":1,"message":"99","line":13,"column":3,"nodeType":"88","messageId":"89","endLine":13,"endColumn":6},{"ruleId":"86","severity":1,"message":"100","line":14,"column":3,"nodeType":"88","messageId":"89","endLine":14,"endColumn":12},{"ruleId":"86","severity":1,"message":"101","line":15,"column":3,"nodeType":"88","messageId":"89","endLine":15,"endColumn":7},{"ruleId":"86","severity":1,"message":"102","line":16,"column":3,"nodeType":"88","messageId":"89","endLine":16,"endColumn":12},{"ruleId":"86","severity":1,"message":"91","line":17,"column":3,"nodeType":"88","messageId":"89","endLine":17,"endColumn":6},{"ruleId":"86","severity":1,"message":"103","line":18,"column":3,"nodeType":"88","messageId":"89","endLine":18,"endColumn":17},{"ruleId":"86","severity":1,"message":"104","line":45,"column":20,"nodeType":"88","messageId":"89","endLine":45,"endColumn":32},{"ruleId":"86","severity":1,"message":"105","line":45,"column":34,"nodeType":"88","messageId":"89","endLine":45,"endColumn":42},{"ruleId":"86","severity":1,"message":"92","line":1,"column":28,"nodeType":"88","messageId":"89","endLine":1,"endColumn":34},{"ruleId":"86","severity":1,"message":"93","line":2,"column":10,"nodeType":"88","messageId":"89","endLine":2,"endColumn":23},{"ruleId":"86","severity":1,"message":"106","line":2,"column":25,"nodeType":"88","messageId":"89","endLine":2,"endColumn":30},{"ruleId":"86","severity":1,"message":"94","line":2,"column":44,"nodeType":"88","messageId":"89","endLine":2,"endColumn":46},{"ruleId":"86","severity":1,"message":"107","line":6,"column":3,"nodeType":"88","messageId":"89","endLine":6,"endColumn":21},{"ruleId":"86","severity":1,"message":"91","line":16,"column":3,"nodeType":"88","messageId":"89","endLine":16,"endColumn":6},"no-native-reassign",["108"],"no-negated-in-lhs",["109"],"@typescript-eslint/no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","'debounceTime' is defined but never used.","'tap' is defined but never used.","'useRef' is defined but never used.","'combineLatest' is defined but never used.","'of' is defined but never used.","'useObservable' is defined but never used.","'useObservableCallback' is defined but never used.","'useSubscription' is defined but never used.","'mouse' is defined but never used.","'map' is defined but never used.","'switchMap' is defined but never used.","'take' is defined but never used.","'takeUntil' is defined but never used.","'withLatestFrom' is defined but never used.","'containerRef' is assigned a value but never used.","'onRegion' is assigned a value but never used.","'merge' is defined but never used.","'useObservableState' is defined but never used.","no-global-assign","no-unsafe-negation"]