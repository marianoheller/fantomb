(this.webpackJsonpfantomb=this.webpackJsonpfantomb||[]).push([[0],{122:function(e,t,n){"use strict";n.r(t);var r,c,a,u,o,i,b,s,j,O=n(0),l=n.n(O),f=n(63),p=n.n(f),d=n(68),g=n(2),v=n(7),h=n(8),m=n(139),x=n(64),k=n.n(x),w=n(25),y=n(3),$=h.a.div(r||(r=Object(v.a)(["\n  display: flex;\n  justify-content: center;\n"]))),R=Object(h.a)(k.a)(c||(c=Object(v.a)(["\n  pointer-events: none;\n"]))),C=function(e){var t=e.url$,n=e.status$,r=e.playerRef$,c=e.setProgress,a=e.setDuration,u=Object(m.a)((function(){return r})),o=Object(g.a)(u,1)[0],i=Object(m.a)((function(){return t})),b=Object(g.a)(i,1)[0],s=Object(m.a)((function(){return n.pipe(Object(w.a)((function(e){return"playingVideo"===e})))})),j=Object(g.a)(s,1)[0],l=Object(O.useCallback)((function(e){var t=e.played;return c(t)}),[c]);return Object(y.jsx)($,{children:Object(y.jsx)(R,{ref:o,url:b,playing:j,controls:!1,onProgress:l,onDuration:a,volume:1,progressInterval:100},b)})},M=n(123),S=n(140),V=n(70),D=n(127),P=n(141),E=n(124),T=n(126),L=h.a.div(a||(a=Object(v.a)(["\n  margin: 1rem 0;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n"]))),z=h.a.input(u||(u=Object(v.a)(["\n  width: 20rem;\n  text-align: center;\n"]))),A=function(e){var t=e.onChange,n=Object(M.a)((function(e){return e.pipe(Object(w.a)((function(e){return e.currentTarget.value})))})),r=Object(g.a)(n,2),c=r[0],a=r[1],u=Object(M.a)((function(e){return e.pipe(Object(E.a)((function(e){return"Enter"===e.key})),Object(w.a)((function(e){return e.currentTarget.value})))})),o=Object(g.a)(u,2),i=o[0],b=o[1],s=Object(S.a)((function(){return a.pipe(Object(T.a)((function(){return Object(D.a)(Object(P.a)(1e3),b)})))}));return Object(V.a)(s,t),Object(y.jsx)(L,{children:Object(y.jsx)(z,{name:"youtube",type:"text",autoComplete:"on",onChange:c,onKeyPress:i})})},U=n(133),B=n(143),X=n(142),F=n(130),q=n(131),H=n(138),I=n(132),W=n(128),Y=n(129),J=function(e){return e.preventDefault(),e},Z=function(e){return e.stopPropagation(),e},_=function(e){return function(t){if(!e.current)return 0;var n=t.clientX,r=e.current.getBoundingClientRect();return(n-r.left)/r.width}},K=Object(W.a)(document,"mousemove"),G=(Object(W.a)(document,"mousedown"),Object(W.a)(document,"mouseup")),N=n(6),Q=n(45),ee=function(e){var t=e.region$,n=e.containerRef,r=e.onRegion,c=e.key,a=Object(M.a)((function(e){return e.pipe(Object(w.a)(Z))})),u=Object(g.a)(a,2),o=u[0],i=u[1],b=Object(S.a)((function(){return i.pipe(Object(w.a)(J),Object(F.a)((function(e){return K.pipe(Object(w.a)((function(t){if(t.preventDefault(),!n.current)return 0;var r=n.current.getBoundingClientRect();return(t.clientX-e.clientX)/r.width})),Object(q.a)(G))})))})),s=Object(S.a)((function(){return b.pipe(Object(I.a)(t),Object(w.a)((function(e){var t=Object(g.a)(e,2),n=t[0],r=t[1];return r?Object(N.a)(Object(N.a)({},r),{},Object(Q.a)({},c,r[c]+n)):r})))})),j=Object(S.a)((function(){return s.pipe(Object(F.a)((function(e){return G.pipe(Object(H.a)(1),Object(w.a)((function(){return e})))})))}));return Object(V.a)(j,r),{updatedRegion$:s,onMouseDown:o}},te=h.a.rect(o||(o=Object(v.a)(["\n  height: 100%;\n  fill: rgba(0, 0, 0, 0.25);\n  stroke: rgba(0, 0, 0, 0.25);\n  cursor: all-scroll;\n"]))),ne=h.a.rect(i||(i=Object(v.a)(["\n  height: 100%;\n  width: 1px;\n  fill: rgba(0, 0, 0, 0.5);\n  cursor: col-resize;\n"]))),re=function(e){var t=e.region$,n=function(e){var t=e.region$,n=e.containerRef,r=e.onRegion,c=Object(M.a)((function(e){return e.pipe(Object(w.a)(Z))})),a=Object(g.a)(c,2),u=a[0],o=a[1],i=Object(S.a)((function(){return o.pipe(Object(w.a)(J),Object(F.a)((function(e){return K.pipe(Object(w.a)((function(t){if(t.preventDefault(),!n.current)return 0;var r=n.current.getBoundingClientRect();return(t.clientX-e.clientX)/r.width})),Object(q.a)(G))})))})),b=Object(S.a)((function(){return i.pipe(Object(I.a)(t),Object(w.a)((function(e){var t=Object(g.a)(e,2),n=t[0],r=t[1];return r?{end:r.end+n,start:r.start+n}:r})))})),s=Object(S.a)((function(){return b.pipe(Object(F.a)((function(e){return G.pipe(Object(H.a)(1),Object(w.a)((function(){return e})))})))}));return Object(V.a)(s,r),{updatedRegion$:b,onMouseDown:u}}(e),r=ee(Object(N.a)(Object(N.a)({},e),{},{key:"start"})),c=ee(Object(N.a)(Object(N.a)({},e),{},{key:"end"})),a=Object(m.a)((function(){return Object(U.a)(t,n.updatedRegion$,r.updatedRegion$,c.updatedRegion$)}),void 0),u=Object(g.a)(a,1)[0];return void 0===u?null:Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(te,{onClick:function(e){return e.stopPropagation()},onMouseDown:n.onMouseDown,x:"".concat(100*u.start,"%"),width:"".concat(100*(u.end-u.start),"%")}),Object(y.jsx)(ne,{x:"".concat(100*u.start,"%"),onClick:function(e){return e.stopPropagation()},onMouseDown:r.onMouseDown}),Object(y.jsx)(ne,{x:"".concat(100*u.end,"%"),onClick:function(e){return e.stopPropagation()},onMouseDown:c.onMouseDown})]})},ce=n(49),ae=n(54),ue=n.n(ae),oe=n(134),ie=n(137),be=h.a.g(b||(b=Object(v.a)(["\n  transform: translateY(100%);\n"]))),se=h.a.rect(s||(s=Object(v.a)(["\n  height: 100%;\n  width: 1px;\n  fill: rgba(0, 0, 0, 0.1);\n  transform: translateY(-100%);\n"]))),je=h.a.text(j||(j=Object(v.a)(["\n  font-size: 0.33rem;\n  color: black;\n"])));var Oe,le,fe,pe,de=[1,2,5,10,15,20,30,40].concat(Object(ce.a)(Object(ce.a)(Array(20).keys()).map((function(e){return 60*e})))),ge=function(e){var t=e.duration$,n=e.zoom$,r=Object(S.a)((function(){return n.pipe(Object(ie.a)(100),Object(w.a)((function(e){return Math.round(e/10)})))})),c=Object(m.a)((function(){return Object(oe.a)([t,r]).pipe(Object(w.a)((function(e){var t=Object(g.a)(e,2),n=t[0],r=t[1];if(!n)return null;var c=n/r,a=de.find((function(e){return e>=c}))||3840,u=Math.floor(n/a);return Object(ce.a)(Array(u).keys()).map((function(e){var t,n=100*e/u,r=function(e){var t=new Date(1970,0,1);return e&&t.setSeconds(e),t}(a*e),c=(t=r).getHours()>0?ue()(t,"HH:mm:ss"):ue()(t,"mm:ss");return Object(y.jsxs)("g",{children:[Object(y.jsx)(se,{x:"".concat(n,"%")}),Object(y.jsx)(je,{x:"".concat(n,"%"),y:"-2px",textAnchor:"middle",children:c})]},r.valueOf())}))})))})),a=Object(g.a)(c,1)[0];return Object(y.jsx)(be,{children:a})},ve=h.a.rect(Oe||(Oe=Object(v.a)(["\n  width: 1px;\n  height: 100%;\n  fill: rgb(10, 10, 10);\n"]))),he=function(e){var t=e.progress$,n=Object(m.a)((function(){return t.pipe(Object(w.a)((function(e){return e?"".concat(100*e,"%"):"0px"})))}),"0px"),r=Object(g.a)(n,1)[0];return Object(y.jsx)(ve,{x:r})},me=n(135),xe=function(e){var t=e.deltaX,n=e.deltaY,r=[Math.sign(t),Math.sign(n)].filter(Math.abs).reduce((function(e,t){return e*t}),1);return Math.sqrt(Math.pow(t,2)+Math.pow(n,2))*r},ke=h.a.div(le||(le=Object(v.a)(["\n  width: 100%;\n  overflow: hidden;\n  overflow-x: auto;\n"]))),we=h.a.svg(fe||(fe=Object(v.a)(["\n  width: ",";\n  height: 2rem;\n  background-color: rgb(240, 240, 240);\n  cursor: ",";\n  pointer-events: ",";\n"])),(function(e){var t=e.zoom;return"".concat(t,"%")}),(function(e){return e.interactable?"pointer":"auto"}),(function(e){return e.interactable?"all":"none"})),ye=function(e){var t=e.url$,n=e.region$,r=e.progress$,c=e.duration$,a=e.setRegion,u=e.setProgress,o=Object(O.useRef)(null),i=function(e){Object(O.useEffect)((function(){var t;return null===(t=e.current)||void 0===t?void 0:t.addEventListener("wheel",(function(e){return e.preventDefault()}))}),[e]);var t=Object(M.a)((function(e){return e.pipe(Object(w.a)(J))})),n=Object(g.a)(t,2),r=n[0],c=n[1],a=Object(M.a)((function(e){return e.pipe(Object(w.a)((function(){return 100})))})),u=Object(g.a)(a,2),o=u[0],i=u[1];return{zoom$:Object(S.a)((function(){return Object(U.a)(i,c.pipe(Object(X.a)(20),Object(w.a)(xe),Object(me.a)((function(e,t){return Math.max(100,t+e)}),100),Object(Y.a)()))})),onWheel:r,resetZoom:o}}(o),b=i.onWheel,s=i.resetZoom,j=i.zoom$,l=Object(m.a)((function(){return j}),100),f=Object(g.a)(l,1)[0],p=Object(m.a)((function(){return t.pipe(Object(B.a)((function(){return s()})),Object(w.a)((function(e){return void 0!==e})))}),!1),d=Object(g.a)(p,1)[0],v=Object(M.a)((function(e){return e.pipe(Object(w.a)(J))})),h=Object(g.a)(v,2),x=h[0],k=h[1],$=Object(M.a)((function(e){return e.pipe(Object(w.a)(J))})),R=Object(g.a)($,2),C=R[0],D=R[1],T=K.pipe(Object(w.a)(_(o)),Object(E.a)((function(e){return void 0!==e}))),L=Object(M.a)((function(e){return e})),z=Object(g.a)(L,2),A=z[0],W=z[1].pipe(Object(E.a)((function(e){return 0===e.button})),Object(w.a)(_(o))),Z=k.pipe(Object(E.a)((function(e){return 2===e.button})),Object(X.a)(500)),G=k.pipe(Object(F.a)((function(e){return Object(P.a)(100).pipe(Object(q.a)(D),Object(w.a)((function(){return _(o)(e)})))}))),N=Z.pipe(Object(w.a)((function(){}))),Q=Object(U.a)(G.pipe(Object(F.a)((function(e){return T.pipe(Object(w.a)((function(t){return e>t?{start:t,end:e}:{start:e,end:t}})),Object(q.a)(D))}))),N),ee=G.pipe(Object(F.a)((function(){return D.pipe(Object(H.a)(1))})),Object(I.a)(Q),Object(w.a)((function(e){var t=Object(g.a)(e,2);t[0];return t[1]})));Object(V.a)(W,u),Object(V.a)(ee,a),Object(V.a)(N,a);var te=Object(S.a)((function(){return Object(U.a)(n,Q)}));return Object(y.jsx)(ke,{children:Object(y.jsxs)(we,{ref:o,onContextMenu:function(e){return e.preventDefault()},onClick:A,onMouseUp:C,onMouseDown:x,onWheel:b,interactable:d,zoom:f,children:[Object(y.jsx)(he,{progress$:r}),Object(y.jsx)(re,{region$:te,containerRef:o,onRegion:a}),Object(y.jsx)(ge,{duration$:c,zoom$:j})]})})},$e=function(e){return{video:"playingVideo"===e?"Stop":"Play",recording:"recordingVoice"===e?"Stop recording":"Start recording",playback:"playingVoice"===e?"Stop voice":"Play Voice"}},Re=h.a.div(pe||(pe=Object(v.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  margin: 1rem 0;\n  & > * {\n    margin: 0 0.5rem;\n  }\n"]))),Ce=function(){},Me=function(e){var t=e.status$,n=e.setStatus,r=Object(m.a)((function(){return t.pipe(Object(w.a)($e))})),c=Object(g.a)(r,1)[0],a=Object(m.a)((function(){return t.pipe(Object(w.a)((function(e){return"playingVideo"===e||"idle"===e})))})),u=Object(g.a)(a,1)[0],o=Object(m.a)((function(){return t.pipe(Object(w.a)((function(e){return"recordingVoice"===e||"idle"===e})))})),i=Object(g.a)(o,1)[0],b=Object(m.a)((function(){return t.pipe(Object(w.a)((function(e){return"playingVoice"===e||"idle"===e})))})),s=Object(g.a)(b,1)[0],j=Object(M.a)((function(e){return e.pipe(Object(I.a)(t))})),O=Object(g.a)(j,2),l=O[0],f=O[1];Object(V.a)(f,(function(e){var t=Object(g.a)(e,2);t[0];switch(t[1]){case"playingVideo":n("idle");break;case"idle":n("playingVideo")}}));var p=Object(M.a)((function(e){return e.pipe(Object(I.a)(t))})),d=Object(g.a)(p,2),v=d[0],h=d[1];Object(V.a)(h,(function(e){var t=Object(g.a)(e,2);t[0];switch(t[1]){case"recordingVoice":n("idle");break;case"idle":n("attemptingRecord")}}));var x=Object(M.a)((function(e){return e.pipe(Object(I.a)(t))})),k=Object(g.a)(x,2),$=k[0],R=k[1];return Object(V.a)(R,(function(e){var t=Object(g.a)(e,2);t[0];switch(t[1]){case"playingVoice":n("idle");break;case"idle":n("playingVoice")}})),Object(y.jsxs)(Re,{children:[Object(y.jsx)("button",{disabled:!u,onClick:u?l:Ce,children:null===c||void 0===c?void 0:c.video}),Object(y.jsx)("button",{disabled:!i,onClick:i?v:Ce,children:null===c||void 0===c?void 0:c.recording}),Object(y.jsx)("button",{disabled:!s,onClick:s?$:Ce,children:null===c||void 0===c?void 0:c.playback})]})},Se=n(136),Ve=n(37),De=n.n(Ve),Pe=n(55),Ee=function(){};var Te=function(e){var t=e.status$,n=e.setStatus,r=Object(O.useRef)(null),c=Object(S.a)((function(){return t.pipe(Object(Se.a)())})),a=Object(O.useState)(void 0),u=Object(g.a)(a,2),o=u[0],i=u[1],b=function(e){var t=e.blobOptions,n=void 0===t?{}:t,r=e.onStop,c=void 0===r?Ee:r,a=e.onStart,u=void 0===a?Ee:a,o=e.onError,i=void 0===o?Ee:o,b=e.onDataAvailable,s=void 0===b?Ee:b,j=l.a.useRef([]),f=l.a.useRef(null),p=l.a.useRef(null),d=l.a.useState(null),v=Object(g.a)(d,2),h=v[0],m=v[1],x=l.a.useState("idle"),k=Object(g.a)(x,2),w=k[0],y=k[1],$=l.a.useState(null),R=Object(g.a)($,2),C=R[0],M=R[1],S=l.a.useState(!1),V=Object(g.a)(S,2),D=V[0],P=V[1],E=Object(O.useCallback)(Object(Pe.a)(De.a.mark((function e(){var t;return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h&&m(null),y("acquiring_media"),e.prev=2,e.next=5,window.navigator.mediaDevices.getUserMedia({audio:!0});case 5:(t=e.sent).getAudioTracks().forEach((function(e){return t.addTrack(e)})),f.current=t,y("ready"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),m(e.t0),y("failed");case 15:case"end":return e.stop()}}),e,null,[[2,11]])}))),[f,y,m,h]),T=Object(O.useCallback)((function(){f.current&&(f.current.getTracks().forEach((function(e){return e.stop()})),f.current=null)}),[f]),L=Object(O.useCallback)((function(e){e.data.size&&j.current.push(e.data),s(e.data)}),[s,j]),z=Object(O.useCallback)((function(){var e=Object(g.a)(j.current,1)[0],t=e?e.type:"audio/webm",r=Object.assign({type:t},n),a=new Blob(j.current,r);M(a),y("stopped"),c(a)}),[j,n,M,y,c]),A=Object(O.useCallback)((function(e){m(e.error),y("idle"),i(e.error)}),[m,y,i]),U=Object(O.useCallback)(Object(Pe.a)(De.a.mark((function e(){return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h&&m(null),f.current||"acquiring_media"===w){e.next=4;break}return e.next=4,E();case 4:j.current=[],f.current&&(p.current=new MediaRecorder(f.current,{mimeType:"audio/webm"}),p.current.addEventListener("dataavailable",L),p.current.addEventListener("stop",z),p.current.addEventListener("error",A),p.current.start(50),y("recording"),u());case 6:case"end":return e.stop()}}),e)}))),[p,f,j,h,w,u,m,y,E,L,A,z]),B=Object(O.useCallback)((function(e){P(e),f.current&&f.current.getAudioTracks().forEach((function(t){t.enabled=!e}))}),[P,f]),X=Object(O.useCallback)((function(){p.current&&"recording"===p.current.state&&p.current.pause()}),[p]),F=Object(O.useCallback)((function(){p.current&&"paused"===p.current.state&&p.current.resume()}),[p]),q=Object(O.useCallback)((function(){if(p.current){y("stopping");try{p.current.stop()}catch(e){console.warn("Stoping idle media recorder!")}p.current.removeEventListener("dataavailable",L),p.current.removeEventListener("stop",z),p.current.removeEventListener("error",A),T()}}),[p,T,L,A,z,y]);return l.a.useEffect((function(){if(!window.MediaRecorder)throw new ReferenceError("MediaRecorder is not supported in this browser. Please ensure that you are running the latest version of chrome/firefox/edge.")}),[]),{error:h,status:w,mediaBlob:C,isAudioMuted:D,stopRecording:q,getMediaStream:E,startRecording:U,pauseRecording:X,resumeRecording:F,clearMediaStream:T,muteAudio:function(){return B(!0)},unMuteAudio:function(){return B(!1)},get liveStream(){return f.current?new MediaStream(f.current.getVideoTracks()):null}}}({onStop:Object(O.useCallback)((function(e){if(r.current){var t=URL.createObjectURL(e);r.current.src=t,i(t),n("idle")}}),[n,i,r]),onStart:Object(O.useCallback)((function(){return n("recordingVoice")}),[n]),onError:Object(O.useCallback)((function(){return n("idle")}),[n])}),s=b.startRecording,j=b.stopRecording;Object(V.a)(c,(function(e){var t=Object(g.a)(e,2),n=t[0];switch(t[1]){case"attemptingRecord":s(),URL.revokeObjectURL(o||""),i(void 0);break;case"playingVoice":r.current&&r.current.src&&r.current.play();break;case"idle":"playingVoice"===n?r.current&&(r.current.pause(),r.current.currentTime=0):"recordingVoice"===n&&j()}}));var f=Object(O.useCallback)((function(){r.current&&(r.current.pause(),r.current.currentTime=0,n("idle"))}),[r,n]);return Object(y.jsx)("audio",{ref:r,onEnded:f})},Le=n(125),ze={status:"idle",url:void 0,duration:0,progress:0,region:void 0,playerRef:Object(O.createRef)()};var Ae=function(){var e=function(){var e=Object(O.useMemo)((function(){return new Le.a(ze)}),[]),t=Object(O.useCallback)((function(t){var n,r=e.getValue();r.region&&(null===(n=r.playerRef.current)||void 0===n||n.seekTo(r.region.start)),e.next(Object(N.a)(Object(N.a)({},r),{},{status:t}))}),[e]),n=Object(O.useCallback)((function(t){return e.next(Object(N.a)(Object(N.a)({},e.getValue()),{},{url:t}))}),[e]),r=Object(O.useCallback)((function(t){var n,r=e.getValue();if(r.region&&t>=r.region.end)return null===(n=r.playerRef.current)||void 0===n||n.seekTo(r.region.start),void e.next(Object(N.a)(Object(N.a)({},r),{},{progress:r.region.start,status:"idle"}));e.next(Object(N.a)(Object(N.a)({},r),{},{progress:t}))}),[e]),c=Object(O.useCallback)((function(t){var n,r=e.getValue();null===(n=r.playerRef.current)||void 0===n||n.seekTo(t),e.next(Object(N.a)(Object(N.a)({},r),{},{status:"idle",progress:t}))}),[e]),a=Object(O.useCallback)((function(t){return e.next(Object(N.a)(Object(N.a)({},e.getValue()),{},{duration:t}))}),[e]),u=Object(O.useCallback)((function(t){return e.next(Object(N.a)(Object(N.a)({},e.getValue()),{},{region:t}))}),[e]);return{state$:e,setStatus:t,setUrl:n,setProgress:r,setManualProgress:c,setDuration:a,setRegion:u}}(),t=e.state$,n=Object(d.a)(e,["state$"]),r=function(e){return{status$:Object(S.a)((function(){return e.pipe(Object(w.a)((function(e){return e.status})),Object(Y.a)())})),url$:Object(S.a)((function(){return e.pipe(Object(w.a)((function(e){return e.url})),Object(Y.a)())})),duration$:Object(S.a)((function(){return e.pipe(Object(w.a)((function(e){return e.duration})),Object(Y.a)())})),progress$:Object(S.a)((function(){return e.pipe(Object(w.a)((function(e){return e.progress})),Object(Y.a)())})),region$:Object(S.a)((function(){return e.pipe(Object(w.a)((function(e){return e.region})),Object(Y.a)())})),playerRef$:Object(S.a)((function(){return e.pipe(Object(w.a)((function(e){return e.playerRef})),Object(Y.a)())}))}}(t),c=r.url$,a=r.status$,u=r.region$,o=r.duration$,i=r.progress$,b=r.playerRef$;return Object(y.jsxs)("div",{children:[Object(y.jsx)(A,{onChange:n.setUrl}),Object(y.jsx)(ye,{url$:c,region$:u,duration$:o,progress$:i,setRegion:n.setRegion,setProgress:n.setManualProgress}),Object(y.jsx)(Me,{status$:a,setStatus:n.setStatus}),Object(y.jsx)(C,{url$:c,playerRef$:b,status$:a,setDuration:n.setDuration,setProgress:n.setProgress}),Object(y.jsx)(Te,{status$:a,setStatus:n.setStatus})]})},Ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,144)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,u=t.getTTFB;n(e),r(e),c(e),a(e),u(e)}))};p.a.render(Object(y.jsx)(l.a.StrictMode,{children:Object(y.jsx)(Ae,{})}),document.getElementById("root")),Ue()}},[[122,1,2]]]);
//# sourceMappingURL=main.738c2a4b.chunk.js.map