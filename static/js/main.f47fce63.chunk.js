(this.webpackJsonpfantomb=this.webpackJsonpfantomb||[]).push([[0],{122:function(e,t,n){"use strict";n.r(t);var r,c,a,u,i,o,s=n(0),b=n.n(s),j=n(61),O=n.n(j),l=n(3),f=n(9),d=n(140),p=n(62),g=n.n(p),v=n(22),h=n(10),x=n(2),w=Object(h.a)(g.a)(r||(r=Object(f.a)(["\n  pointer-events: none;\n"]))),k=function(e){var t=e.state$,n=e.setProgress,r=e.setDuration,c=Object(d.a)((function(){return t.pipe(Object(v.a)((function(e){return e.playerRef})))})),a=Object(l.a)(c,1)[0],u=Object(s.useCallback)((function(e){var t=e.played;return n(t)}),[n]),i=Object(d.a)((function(){return t.pipe(Object(v.a)((function(e){return e.url})))})),o=Object(l.a)(i,1)[0],b=Object(d.a)((function(){return t.pipe(Object(v.a)((function(e){return"playingVideo"===e.status})))})),j=Object(l.a)(b,1)[0];return Object(x.jsx)(w,{ref:a,url:o,playing:j,controls:!1,onDuration:r,onProgress:u,volume:1,progressInterval:100})},m=n(126),R=n(141),y=n(67),C=n(130),S=n(142),V=n(127),M=n(129),$=function(e){var t=e.onChange,n=Object(m.a)((function(e){return e.pipe(Object(v.a)((function(e){return e.currentTarget.value})))})),r=Object(l.a)(n,2),c=r[0],a=r[1],u=Object(m.a)((function(e){return e.pipe(Object(V.a)((function(e){return"Enter"===e.key})),Object(v.a)((function(e){return e.currentTarget.value})))})),i=Object(l.a)(u,2),o=i[0],s=i[1],b=Object(R.a)((function(){return a.pipe(Object(M.a)((function(){return Object(C.a)(Object(S.a)(1e3),s)})))}));return Object(y.a)(b,t),Object(x.jsx)("input",{name:"youtube url",onChange:c,onKeyPress:o})},D=n(139),E=n(132),P=n(143),L=n(133),T=n(134),A=n(138),U=n(135),z=n(131),B=function(e){return e.preventDefault(),e},F=function(e){return e.stopPropagation(),e},H=function(e){return function(t){if(!e.current)return 0;var n=t.clientX,r=e.current.getBoundingClientRect();return(n-r.left)/r.width}},X=Object(z.a)(document,"mousemove"),q=(Object(z.a)(document,"mousedown"),Object(z.a)(document,"mouseup")),I=n(6),_=n(43),J=function(e){var t=e.region$,n=e.containerRef,r=e.onRegion,c=e.key,a=Object(m.a)((function(e){return e.pipe(Object(v.a)(F))})),u=Object(l.a)(a,2),i=u[0],o=u[1],s=Object(R.a)((function(){return o.pipe(Object(v.a)(B),Object(L.a)((function(e){return X.pipe(Object(v.a)((function(t){if(t.preventDefault(),!n.current)return 0;var r=n.current.getBoundingClientRect();return(t.clientX-e.clientX)/r.width})),Object(T.a)(q))})))})),b=Object(R.a)((function(){return s.pipe(Object(U.a)(t),Object(v.a)((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return r?Object(I.a)(Object(I.a)({},r),{},Object(_.a)({},c,r[c]+n)):r})))})),j=Object(R.a)((function(){return b.pipe(Object(L.a)((function(e){return q.pipe(Object(A.a)(1),Object(v.a)((function(){return e})))})))}));return Object(y.a)(j,r),{updatedRegion$:b,onMouseDown:i}},Y=h.a.rect(c||(c=Object(f.a)(["\n  height: 100%;\n  fill: rgba(0, 0, 0, 0.25);\n  stroke: rgba(0, 0, 0, 0.25);\n  cursor: all-scroll;\n"]))),K=h.a.rect(a||(a=Object(f.a)(["\n  height: 100%;\n  width: 1px;\n  fill: rgba(0, 0, 0, 0.5);\n  cursor: col-resize;\n"]))),W=function(e){var t=e.region$,n=function(e){var t=e.region$,n=e.containerRef,r=e.onRegion,c=Object(m.a)((function(e){return e.pipe(Object(v.a)(F))})),a=Object(l.a)(c,2),u=a[0],i=a[1],o=Object(R.a)((function(){return i.pipe(Object(v.a)(B),Object(L.a)((function(e){return X.pipe(Object(v.a)((function(t){if(t.preventDefault(),!n.current)return 0;var r=n.current.getBoundingClientRect();return(t.clientX-e.clientX)/r.width})),Object(T.a)(q))})))})),s=Object(R.a)((function(){return o.pipe(Object(U.a)(t),Object(v.a)((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return r?{end:r.end+n,start:r.start+n}:r})))})),b=Object(R.a)((function(){return s.pipe(Object(L.a)((function(e){return q.pipe(Object(A.a)(1),Object(v.a)((function(){return e})))})))}));return Object(y.a)(b,r),{updatedRegion$:s,onMouseDown:u}}(e),r=J(Object(I.a)(Object(I.a)({},e),{},{key:"start"})),c=J(Object(I.a)(Object(I.a)({},e),{},{key:"end"})),a=Object(d.a)((function(){return Object(D.a)(t,n.updatedRegion$,r.updatedRegion$,c.updatedRegion$)}),void 0),u=Object(l.a)(a,1)[0];return void 0===u?null:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Y,{onClick:function(e){return e.stopPropagation()},onMouseDown:n.onMouseDown,x:"".concat(100*u.start,"%"),width:"".concat(100*(u.end-u.start),"%")}),Object(x.jsx)(K,{x:"".concat(100*u.start,"%"),onClick:function(e){return e.stopPropagation()},onMouseDown:r.onMouseDown}),Object(x.jsx)(K,{x:"".concat(100*u.end,"%"),onClick:function(e){return e.stopPropagation()},onMouseDown:c.onMouseDown})]})},G=n(137),N=n(52),Q=n.n(N);var Z=h.a.g(u||(u=Object(f.a)(["\n  transform: translateY(100%);\n"]))),ee=h.a.rect(i||(i=Object(f.a)(["\n  height: 100%;\n  width: 1px;\n  fill: rgba(0, 0, 0, 0.1);\n  transform: translateY(-100%);\n"]))),te=h.a.text(o||(o=Object(f.a)(["\n  font-size: 0.33rem;\n  color: black;\n"])));function ne(e){var t=new Date(1970,0,1);return e&&t.setSeconds(e),t}var re,ce,ae,ue=function(e){var t=e.duration$,n=function(){var e=Object(s.useState)([0,0]),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(s.useLayoutEffect)((function(){function e(){r([window.innerWidth,window.innerHeight])}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n}(),r=Object(R.a)((function(){return t.pipe(Object(v.a)((function(e){if(e)return Object(G.a)().domain([ne(0),ne(e)]).range([0,100])})))})),c=Object(d.a)((function(){return r.pipe(Object(v.a)((function(e){return e?e.ticks(10).map((function(e,t){var n,r=100*t/10,c=(n=e).getHours()>0?Q()(n,"HH:mm:ss"):Q()(n,"mm:ss");return Object(x.jsxs)("g",{children:[Object(x.jsx)(ee,{x:"".concat(r,"%")}),Object(x.jsx)(te,{x:"".concat(r,"%"),y:"-2px",textAnchor:"middle",children:c})]},e.valueOf())})):null})))})),a=Object(l.a)(c,1)[0];return Object(x.jsx)(Z,{children:a},String(n))},ie=h.a.rect(re||(re=Object(f.a)(["\n  width: 1px;\n  height: 100%;\n  fill: rgb(10, 10, 10);\n"]))),oe=function(e){var t=e.progress$,n=Object(d.a)((function(){return t.pipe(Object(v.a)((function(e){return e?"".concat(100*e,"%"):"0px"})))}),"0px"),r=Object(l.a)(n,1)[0];return Object(x.jsx)(ie,{x:r})},se=h.a.svg(ce||(ce=Object(f.a)(["\n  width: 100%;\n  height: 2rem;\n  background-color: rgb(240, 240, 240);\n  cursor: ",";\n  pointer-events: ",";\n"])),(function(e){return e.interactable?"pointer":"auto"}),(function(e){return e.interactable?"all":"none"})),be=function(e){var t=e.state$,n=e.setRegion,r=e.setProgress,c=Object(s.useRef)(null),a=Object(d.a)((function(){return t.pipe(Object(v.a)((function(e){return void 0!==e.url})))})),u=Object(l.a)(a,1)[0],i=Object(R.a)((function(){return t.pipe(Object(v.a)((function(e){return e.region})),Object(E.a)())})),o=Object(R.a)((function(){return t.pipe(Object(v.a)((function(e){return e.progress})))})),b=Object(R.a)((function(){return t.pipe(Object(v.a)((function(e){return e.duration})),Object(E.a)())})),j=Object(m.a)((function(e){return e.pipe(Object(v.a)(B))})),O=Object(l.a)(j,2),f=O[0],p=O[1],g=Object(m.a)((function(e){return e.pipe(Object(v.a)(B))})),h=Object(l.a)(g,2),w=h[0],k=h[1],C=X.pipe(Object(v.a)(H(c)),Object(V.a)((function(e){return void 0!==e}))),M=Object(m.a)((function(e){return e})),$=Object(l.a)(M,2),z=$[0],F=$[1].pipe(Object(V.a)((function(e){return 0===e.button})),Object(v.a)(H(c))),q=p.pipe(Object(V.a)((function(e){return 2===e.button})),Object(P.a)(500)),I=p.pipe(Object(L.a)((function(e){return Object(S.a)(100).pipe(Object(T.a)(k),Object(v.a)((function(){return H(c)(e)})))}))),_=q.pipe(Object(v.a)((function(){}))),J=Object(D.a)(I.pipe(Object(L.a)((function(e){return C.pipe(Object(v.a)((function(t){return e>t?{start:t,end:e}:{start:e,end:t}})),Object(T.a)(k))}))),_),Y=I.pipe(Object(L.a)((function(){return k.pipe(Object(A.a)(1))})),Object(U.a)(J),Object(v.a)((function(e){var t=Object(l.a)(e,2);t[0];return t[1]})));Object(y.a)(F,r),Object(y.a)(Y,n),Object(y.a)(_,n);var K=Object(R.a)((function(){return Object(D.a)(i,J)}));return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(se,{ref:c,onContextMenu:function(e){return e.preventDefault()},onClick:z,onMouseUp:w,onMouseDown:f,interactable:!!u,children:[Object(x.jsx)(oe,{progress$:o}),Object(x.jsx)(W,{region$:K,containerRef:c,onRegion:n}),Object(x.jsx)(ue,{duration$:b})]})})},je=function(e){return{video:"playingVideo"===e?"Stop":"Play",recording:"recordingVoice"===e?"Stop recording":"Start recording",playback:"playingVoice"===e?"Stop voice":"Play Voice"}},Oe=h.a.div(ae||(ae=Object(f.a)(["\n  display: flex;\n  width: 100%;\n"]))),le=function(){},fe=function(e){var t=e.state$,n=e.setStatus,r=Object(R.a)((function(){return t.pipe(Object(v.a)((function(e){return e.status})),Object(E.a)())})),c=Object(d.a)((function(){return r.pipe(Object(v.a)(je))})),a=Object(l.a)(c,1)[0],u=Object(d.a)((function(){return r.pipe(Object(v.a)((function(e){return"playingVideo"===e||"idle"===e})))})),i=Object(l.a)(u,1)[0],o=Object(d.a)((function(){return r.pipe(Object(v.a)((function(e){return"recordingVoice"===e||"idle"===e})))})),s=Object(l.a)(o,1)[0],b=Object(d.a)((function(){return r.pipe(Object(v.a)((function(e){return"playingVoice"===e||"idle"===e})))})),j=Object(l.a)(b,1)[0],O=Object(m.a)((function(e){return e.pipe(Object(U.a)(t))})),f=Object(l.a)(O,2),p=f[0],g=f[1];Object(y.a)(g,(function(e){var t=Object(l.a)(e,2);t[0];switch(t[1].status){case"playingVideo":n("idle");break;case"idle":n("playingVideo")}}));var h=Object(m.a)((function(e){return e.pipe(Object(U.a)(t))})),w=Object(l.a)(h,2),k=w[0],C=w[1];Object(y.a)(C,(function(e){var t=Object(l.a)(e,2);t[0];switch(t[1].status){case"recordingVoice":n("idle");break;case"idle":n("recordingVoice")}}));var S=Object(m.a)((function(e){return e.pipe(Object(U.a)(t))})),V=Object(l.a)(S,2),M=V[0],$=V[1];return Object(y.a)($,(function(e){var t=Object(l.a)(e,2);t[0];switch(t[1].status){case"playingVoice":n("idle");break;case"idle":n("playingVoice")}})),Object(x.jsxs)(Oe,{children:[Object(x.jsx)("button",{disabled:!i,onClick:i?p:le,children:null===a||void 0===a?void 0:a.video}),Object(x.jsx)("button",{disabled:!s,onClick:s?k:le,children:null===a||void 0===a?void 0:a.recording}),Object(x.jsx)("button",{disabled:!j,onClick:j?M:le,children:null===a||void 0===a?void 0:a.playback})]})},de=n(136),pe=n(25),ge=n.n(pe),ve=n(53),he=function(){};var xe=function(e){var t=e.state$,n=e.setStatus,r=Object(s.useRef)(null),c=Object(R.a)((function(){return t.pipe(Object(E.a)((function(e,t){return e.status===t.status})),Object(v.a)((function(e){return e.status})),Object(de.a)())})),a=Object(s.useState)(void 0),u=Object(l.a)(a,2),i=u[0],o=u[1],j=function(e){var t=e.blobOptions,n=void 0===t?{}:t,r=e.onStop,c=void 0===r?he:r,a=e.onStart,u=void 0===a?he:a,i=e.onError,o=void 0===i?he:i,j=e.onDataAvailable,O=void 0===j?he:j,f=b.a.useRef([]),d=b.a.useRef(null),p=b.a.useRef(null),g=b.a.useState(null),v=Object(l.a)(g,2),h=v[0],x=v[1],w=b.a.useState("idle"),k=Object(l.a)(w,2),m=k[0],R=k[1],y=b.a.useState(null),C=Object(l.a)(y,2),S=C[0],V=C[1],M=b.a.useState(!1),$=Object(l.a)(M,2),D=$[0],E=$[1],P=Object(s.useCallback)(Object(ve.a)(ge.a.mark((function e(){var t;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h&&x(null),R("acquiring_media"),e.prev=2,e.next=5,window.navigator.mediaDevices.getUserMedia({audio:!0});case 5:(t=e.sent).getAudioTracks().forEach((function(e){return t.addTrack(e)})),d.current=t,R("ready"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),x(e.t0),R("failed");case 15:case"end":return e.stop()}}),e,null,[[2,11]])}))),[d,R,x,h]),L=Object(s.useCallback)((function(){d.current&&(d.current.getTracks().forEach((function(e){return e.stop()})),d.current=null)}),[d]),T=Object(s.useCallback)((function(e){e.data.size&&f.current.push(e.data),O(e.data)}),[O,f]),A=Object(s.useCallback)((function(){var e=Object(l.a)(f.current,1)[0],t=e?e.type:"audio/webm",r=Object.assign({type:t},n),a=new Blob(f.current,r);V(a),R("stopped"),c(a)}),[f,n,V,R,c]),U=Object(s.useCallback)((function(e){x(e.error),R("idle"),o(e.error)}),[x,R,o]),z=Object(s.useCallback)(Object(ve.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h&&x(null),d.current||"acquiring_media"===m){e.next=4;break}return e.next=4,P();case 4:f.current=[],d.current&&(p.current=new MediaRecorder(d.current,{mimeType:"audio/webm"}),p.current.addEventListener("dataavailable",T),p.current.addEventListener("stop",A),p.current.addEventListener("error",U),p.current.start(100),R("recording"),u());case 6:case"end":return e.stop()}}),e)}))),[p,d,f,h,m,u,x,R,P,T,U,A]),B=Object(s.useCallback)((function(e){E(e),d.current&&d.current.getAudioTracks().forEach((function(t){t.enabled=!e}))}),[E,d]),F=Object(s.useCallback)((function(){p.current&&"recording"===p.current.state&&p.current.pause()}),[p]),H=Object(s.useCallback)((function(){p.current&&"paused"===p.current.state&&p.current.resume()}),[p]),X=Object(s.useCallback)((function(){if(p.current){R("stopping");try{p.current.stop()}catch(e){console.warn("Stoping idle media recorder!")}p.current.removeEventListener("dataavailable",T),p.current.removeEventListener("stop",A),p.current.removeEventListener("error",U),L()}}),[p,L,T,U,A,R]);return b.a.useEffect((function(){if(!window.MediaRecorder)throw new ReferenceError("MediaRecorder is not supported in this browser. Please ensure that you are running the latest version of chrome/firefox/edge.")}),[]),{error:h,status:m,mediaBlob:S,isAudioMuted:D,stopRecording:X,getMediaStream:P,startRecording:z,pauseRecording:F,resumeRecording:H,clearMediaStream:L,muteAudio:function(){return B(!0)},unMuteAudio:function(){return B(!1)},get liveStream(){return d.current?new MediaStream(d.current.getVideoTracks()):null}}}({onStop:Object(s.useCallback)((function(e){if(r.current){var t=URL.createObjectURL(e);r.current.src=t,o(t),n("idle")}}),[n,o,r])}),O=j.startRecording,f=j.stopRecording;Object(y.a)(c,(function(e){var t=Object(l.a)(e,2),n=t[0];switch(t[1]){case"recordingVoice":O(),URL.revokeObjectURL(i||""),o(void 0);break;case"playingVoice":r.current&&r.current.src&&r.current.play();break;case"idle":"playingVoice"===n?r.current&&(r.current.pause(),r.current.currentTime=0):"recordingVoice"===n&&f()}}));var d=Object(s.useCallback)((function(){r.current&&(r.current.pause(),r.current.currentTime=0,n("idle"))}),[r,n]);return Object(x.jsx)("audio",{ref:r,onEnded:d})},we=n(128),ke={status:"idle",url:void 0,duration:0,progress:0,region:void 0,playerRef:Object(s.createRef)()};var me=function(){var e=function(){var e=Object(s.useMemo)((function(){return new we.a(ke)}),[]),t=Object(s.useCallback)((function(t){var n,r=e.getValue();r.region&&(null===(n=r.playerRef.current)||void 0===n||n.seekTo(r.region.start)),e.next(Object(I.a)(Object(I.a)({},r),{},{status:t}))}),[e]),n=Object(s.useCallback)((function(t){return e.next(Object(I.a)(Object(I.a)({},e.getValue()),{},{url:t}))}),[e]),r=Object(s.useCallback)((function(t){var n,r=e.getValue();if(r.region&&t>=r.region.end)return null===(n=r.playerRef.current)||void 0===n||n.seekTo(r.region.start),void e.next(Object(I.a)(Object(I.a)({},r),{},{progress:r.region.start,status:"idle"}));e.next(Object(I.a)(Object(I.a)({},r),{},{progress:t}))}),[e]),c=Object(s.useCallback)((function(t){var n,r=e.getValue();null===(n=r.playerRef.current)||void 0===n||n.seekTo(t),e.next(Object(I.a)(Object(I.a)({},r),{},{status:"idle",progress:t}))}),[e]),a=Object(s.useCallback)((function(t){return e.next(Object(I.a)(Object(I.a)({},e.getValue()),{},{duration:t}))}),[e]),u=Object(s.useCallback)((function(t){return e.next(Object(I.a)(Object(I.a)({},e.getValue()),{},{region:t}))}),[e]);return Object(y.a)(e,(function(e){return console.log("State",e)})),{state$:e,setStatus:t,setUrl:n,setProgress:r,setManualProgress:c,setDuration:a,setRegion:u}}(),t=e.state$,n=e.setUrl,r=e.setStatus,c=e.setDuration,a=e.setProgress,u=e.setManualProgress,i=e.setRegion;return Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"https://www.youtube.com/watch?v=EqE_AH39144"}),Object(x.jsx)("p",{children:"https://www.youtube.com/watch?v=sS55zq6Hz8A"}),Object(x.jsx)($,{onChange:n}),Object(x.jsx)(be,{state$:t,setRegion:i,setProgress:u}),Object(x.jsx)(fe,{state$:t,setStatus:r}),Object(x.jsx)(k,{state$:t,setDuration:c,setProgress:a}),Object(x.jsx)(xe,{state$:t,setStatus:r})]})},Re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,144)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,u=t.getTTFB;n(e),r(e),c(e),a(e),u(e)}))};O.a.render(Object(x.jsx)(b.a.StrictMode,{children:Object(x.jsx)(me,{})}),document.getElementById("root")),Re()}},[[122,1,2]]]);
//# sourceMappingURL=main.f47fce63.chunk.js.map